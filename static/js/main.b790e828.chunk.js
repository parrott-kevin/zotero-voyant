(this["webpackJsonpzotero-voyant"]=this["webpackJsonpzotero-voyant"]||[]).push([[0],{114:function(e,t){},116:function(e,t){},132:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),l=n.n(c),o=n(166),i=n(163),u=n(161),s=n(156),m=n(160),p=n(134),f=n(82),d=n.n(f),E=n(12),h=n.n(E),y=n(21),v=n(34),k=n(41),b=n(61),w=n(159),g=n(164),O=n(165),j=n(158),x=n(157),C=n(167),T=n(83),S=n(79),N=n(80),F=n(81),U=function(){function e(){Object(S.a)(this,e)}return Object(N.a)(e,[{key:"handleUpload",value:function(){var e=Object(y.a)(h.a.mark((function e(t,n){var a,r,c,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.readUploadedFileAsText(t);case 3:if("string"!==typeof(a=e.sent)){e.next=13;break}return e.next=7,this.process(a,n);case 7:return r=e.sent,c=encodeURIComponent(JSON.stringify({data:r})),l="data:application/json;charset=utf-8,".concat(c),e.abrupt("return",l);case 13:throw new Error("Problem parsing input file");case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(0),console.error(e.t0.message),e.abrupt("return");case 20:case"end":return e.stop()}}),e,this,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"readUploadedFileAsText",value:function(){var e=Object(y.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FileReader,e.abrupt("return",new Promise((function(e,a){n.onerror=function(){n.abort(),a(new DOMException("Problem parsing input file"))},n.onload=function(){e(n.result)},n.readAsText(t,"UTF-8")})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"process",value:function(){var e=Object(y.a)(h.a.mark((function e(t,n){var a,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(F.parseStringPromise)(t);case 2:return a=e.sent,r=JSON.parse(JSON.stringify(a)),c=[],r.xml.records[0].record.forEach((function(e){var t=e.titles.reduce((function(e,t){return e.concat(t.title.join(" ")," ")}),""),a=[];if(n.keywords&&e.keywords){var r=e.keywords.reduce((function(e,t){return e.concat(t.keyword.join(" ")," ")}),"").trim();a.push(r)}if(n.refType&&e["ref-type"]){var l=e["ref-type"].reduce((function(e,t){return e.concat(t.$.name," ")}),"").trim();a.push(l)}if(n.workType&&e["work-type"]){var o=e["work-type"].join(" ");a.push(o)}if(n.researchNotes&&e["research-notes"]){var i=function(e){return e.replace(/\r?\n|\r/g," ")},u=e["research-notes"].reduce((function(e,t){if("string"===typeof t){var n=i(t);return e.concat(n," ")}if(t.style){var a=t.style.reduce((function(e,t){if(t._){var n=i(t._);return e.concat(n," ")}return e}),"");return e.concat(a," ")}return e}),"");a.push(u)}c.push({title:t,content:a.join(" ")})})),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),J=Object(T.a)("input")({display:"none"}),M=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],c=t[1],l=Object(a.useRef)(null),o=new U,i={keywords:!0,researchNotes:!1,refType:!1,workType:!1},u=Object(a.useState)(Object(k.a)({},i)),m=Object(b.a)(u,2),p=m[0],f=m[1],d=function(e){f(Object(k.a)({},p,Object(v.a)({},e.target.name,e.target.checked)))},E=p.keywords,T=p.researchNotes,S=p.refType,N=p.workType,F=function(){var e=Object(y.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.files){e.next=6;break}return n=t.target.files[0],e.next=4,o.handleUpload(n,p);case 4:(a=e.sent)&&c(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(s.a,{container:!0,direction:"column",spacing:2},n?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{item:!0,xs:12,sm:6},r.a.createElement(w.a,{variant:"contained",color:"primary",href:n,download:"data.json",fullWidth:!0},"Download")),r.a.createElement(s.a,{item:!0,xs:12,sm:6},r.a.createElement(w.a,{variant:"outlined",color:"secondary",type:"button",onClick:function(){c(""),f(Object(k.a)({},i))},fullWidth:!0},"Reset"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{item:!0,xs:12,sm:6},r.a.createElement(O.a,{component:"fieldset"},r.a.createElement(C.a,{component:"legend"},"Fields to include"),r.a.createElement(x.a,null,r.a.createElement(j.a,{control:r.a.createElement(g.a,{checked:E,onChange:d,name:"keywords"}),label:"Keywords"}),r.a.createElement(j.a,{control:r.a.createElement(g.a,{checked:T,onChange:d,name:"researchNotes"}),label:"Research Notes"}),r.a.createElement(j.a,{control:r.a.createElement(g.a,{checked:S,onChange:d,name:"refType"}),label:"Item Type"}),r.a.createElement(j.a,{control:r.a.createElement(g.a,{checked:N,onChange:d,name:"workType"}),label:"Website Type"})))),r.a.createElement(s.a,{item:!0,xs:12,sm:6},r.a.createElement(J,{ref:l,type:"file",id:"upload",onChange:function(e){F(e)}}),r.a.createElement(w.a,{variant:"outlined",color:"primary",onClick:function(){var e;null===(e=l.current)||void 0===e||e.click()},fullWidth:!0},"Upload XML file"))))},R=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{position:"static"},r.a.createElement(m.a,null,r.a.createElement(i.a,{mr:1},r.a.createElement(d.a,null)),r.a.createElement(p.a,{variant:"h6"},"ZoVo"))),r.a.createElement(i.a,{mt:1},r.a.createElement(u.a,null,r.a.createElement(s.a,{container:!0},r.a.createElement(s.a,{item:!0,xs:12,sm:6},r.a.createElement(p.a,{variant:"h6"},"Create Corpus"),r.a.createElement(p.a,{variant:"body1",component:"span"},r.a.createElement("ol",null,r.a.createElement("li",null,"Click Upload XML File"),r.a.createElement("li",null,"Select XML File from Computer"),r.a.createElement("li",null,"Click Download JSON corpus"))),r.a.createElement(p.a,{variant:"h6"},"Uploading JSON corpus to Voyant"),r.a.createElement(p.a,{variant:"body1",component:"span"},r.a.createElement("ol",null,r.a.createElement("li",null,"Click the Options slide"),r.a.createElement("li",null,"Click JSON to open relevant fields"),r.a.createElement("li",null,"Fill in fields with following information",r.a.createElement("ul",null,r.a.createElement("li",null,"Content: /content"),r.a.createElement("li",null,"Title: /title"),r.a.createElement("li",null,"Author: leave blank"),r.a.createElement("li",null,"Documents: /data"))),r.a.createElement("li",null,"Click Upload"),r.a.createElement("li",null,"Select JSON corpus saved from ZoVo")))),r.a.createElement(s.a,{item:!0,xs:12,sm:6},r.a.createElement(M,null))))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root"))},94:function(e,t,n){e.exports=n(132)}},[[94,1,2]]]);
//# sourceMappingURL=main.b790e828.chunk.js.map