(this["webpackJsonpzotero-voyant"]=this["webpackJsonpzotero-voyant"]||[]).push([[0],{104:function(e,t){},106:function(e,t){},122:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(19),c=n.n(l),o=n(150),i=n(147),u=n(145),s=n(142),m=n(143),p=n(144),f=n(74),d=n.n(f),E=n(12),v=n.n(E),h=n(21),y=n(75),b=n(148),k=n(76),w=n(71),x=n(72),O=n(73),g=function(){function e(){Object(w.a)(this,e)}return Object(x.a)(e,[{key:"handleUpload",value:function(){var e=Object(h.a)(v.a.mark((function e(t){var n,a,r,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.readUploadedFileAsText(t);case 3:if("string"!==typeof(n=e.sent)){e.next=13;break}return e.next=7,this.process(n);case 7:return a=e.sent,r=encodeURIComponent(JSON.stringify({data:a})),l="data:application/json;charset=utf-8,".concat(r),e.abrupt("return",l);case 13:throw new Error("Problem parsing input file");case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(0),console.error(e.t0.message),e.abrupt("return");case 20:case"end":return e.stop()}}),e,this,[[0,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"readUploadedFileAsText",value:function(){var e=Object(h.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FileReader,e.abrupt("return",new Promise((function(e,a){n.onerror=function(){n.abort(),a(new DOMException("Problem parsing input file"))},n.onload=function(){e(n.result)},n.readAsText(t,"UTF-8")})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"process",value:function(){var e=Object(h.a)(v.a.mark((function e(t){var n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.parseStringPromise)(t);case 2:return n=e.sent,a=JSON.parse(JSON.stringify(n)),r=[],a.xml.records[0].record.forEach((function(e){var t=e.titles.reduce((function(e,t){return e.concat(t.title.join(" ")," ")}),""),n=[];if(e.keywords){var a=e.keywords.reduce((function(e,t){return e.concat(t.keyword.join(" ")," ")}),"");n.push(a)}if(e["research-notes"]){var l=function(e){return e.replace(/\r?\n|\r/g," ")},c=e["research-notes"].reduce((function(e,t){if("string"===typeof t){var n=l(t);return e.concat(n," ")}if(t.style){var a=t.style.reduce((function(e,t){if(t._){var n=l(t._);return e.concat(n," ")}return e}),"");return e.concat(a," ")}return e}),"");n.push(c)}r.push({title:t,content:n.join(" ")})})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),j=Object(k.a)("input")({display:"none"}),C=function(){var e=Object(a.useState)(""),t=Object(y.a)(e,2),n=t[0],l=t[1],c=Object(a.useRef)(null),o=new g,i=function(){var e=Object(h.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.files){e.next=6;break}return n=t.target.files[0],e.next=4,o.handleUpload(n);case 4:(a=e.sent)&&l(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(s.a,{container:!0,direction:"column",spacing:2},n?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{item:!0,xs:12,sm:6},r.a.createElement(b.a,{variant:"contained",color:"primary",href:n,download:"data.json",fullWidth:!0},"Download")),r.a.createElement(s.a,{item:!0,xs:12,sm:6},r.a.createElement(b.a,{variant:"outlined",color:"secondary",type:"button",onClick:function(){l("")},fullWidth:!0},"Reset"))):r.a.createElement(s.a,{item:!0,xs:12,sm:6},r.a.createElement(j,{ref:c,type:"file",id:"upload",onChange:function(e){i(e)}}),r.a.createElement(b.a,{variant:"outlined",color:"primary",onClick:function(){var e;null===(e=c.current)||void 0===e||e.click()},fullWidth:!0},"Upload XML file")))},S=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{position:"static"},r.a.createElement(m.a,null,r.a.createElement(i.a,{mr:1},r.a.createElement(d.a,null)),r.a.createElement(p.a,{variant:"h6"},"ZoVo"))),r.a.createElement(i.a,{mt:1},r.a.createElement(u.a,null,r.a.createElement(s.a,{container:!0},r.a.createElement(s.a,{item:!0,xs:12,sm:6},r.a.createElement(p.a,{variant:"h6"},"Create Corpus"),r.a.createElement(p.a,{variant:"body1",component:"span"},r.a.createElement("ol",null,r.a.createElement("li",null,"Click Upload XML File"),r.a.createElement("li",null,"Select XML File from Computer"),r.a.createElement("li",null,"Click Download JSON corpus"))),r.a.createElement(p.a,{variant:"h6"},"Uploading JSON corpus to Voyant"),r.a.createElement(p.a,{variant:"body1",component:"span"},r.a.createElement("ol",null,r.a.createElement("li",null,"Click the Options slide"),r.a.createElement("li",null,"Click JSON to open relevant fields"),r.a.createElement("li",null,"Fill in fields with following information",r.a.createElement("ul",null,r.a.createElement("li",null,"Content: /content"),r.a.createElement("li",null,"Title: /title"),r.a.createElement("li",null,"Author: leave blank"),r.a.createElement("li",null,"Documents: /data"))),r.a.createElement("li",null,"Click Upload"),r.a.createElement("li",null,"Select JSON corpus saved from ZoVo")))),r.a.createElement(s.a,{item:!0,xs:12,sm:6},r.a.createElement(C,null))))))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root"))},84:function(e,t,n){e.exports=n(122)}},[[84,1,2]]]);
//# sourceMappingURL=main.800c3bd2.chunk.js.map